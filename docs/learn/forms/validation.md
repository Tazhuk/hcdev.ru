---
description: Узнайте, как проверять формы на фронтенде.
icon: material/check
---

# Помогите пользователям вводить правильные данные в формы

<big>Узнайте, как проверять формы на фронтенде.</big>

Браузеры имеют встроенные функции проверки правильности вводимых пользователем данных. Активировать эти функции можно с помощью правильных элементов и атрибутов. Кроме того, валидацию формы можно усилить с помощью CSS и JavaScript.

!!!note ""

    Этот модуль посвящен проверке форм на фронтенде. Вы также должны убедиться в валидации данных перед их хранением или передачей на внутренний сервер: [узнать больше](https://cheatsheetseries.owasp.org/cheatsheets/Input_Validation_Cheat_Sheet.html).

## Зачем нужна валидация форм?

В предыдущем модуле вы узнали, как помочь пользователям избежать необходимости многократного [повторного ввода информации](auto.md) в формах. Как помочь пользователям вводить корректные данные?

Очень неприятно заполнять форму, не зная, какие поля являются обязательными, и каковы ограничения этих полей. Например, вы вводите имя пользователя и отправляете форму, а затем узнаете, что имя пользователя должно состоять не менее чем из восьми символов.

Вы можете помочь пользователям в этом, определив правила валидации и сообщив о них.

## Помочь пользователям избежать случайного пропуска обязательных полей

С помощью HTML можно задать правильный формат и ограничения для данных, вводимых в формы. Также необходимо указать, какие поля являются обязательными.

<iframe src="https://codepen.io/web-dot-dev/embed/1e3e72e4376292ab80ecd8955529806b?height=300&amp;theme-id=light&amp;default-tab=result&amp;editable=true" style="height: 300px; width: 100%; border: 0;" loading="lazy"></iframe>

Попробуйте отправить эту форму, не вводя никаких данных. Появится ли сообщение об ошибке, прикрепленное к `<input>` и сообщающее, что поле является обязательным?

Это происходит из-за атрибута `required`.

```html
<label for="name">Name (required)</label>
<input required type="text" id="name" name="name" />
```

!!!note ""

    В разных браузерах используется разный текст сообщений об ошибках. Формулировка также зависит от языка браузера пользователя. Если вы используете Safari и ваш предпочтительный язык браузера - немецкий, то вы получите другое сообщение об ошибке, чем пользователь Chrome, для которого выбран английский язык браузера.

    О том, как [изменить стандартные сообщения об ошибках с помощью JavaScript](#javascript), читайте далее в этом модуле.

Вы уже узнали, что можно использовать гораздо больше типов, например, `type="email"`. Давайте рассмотрим обязательный email `<input>`.

<iframe src="https://codepen.io/web-dot-dev/embed/061add379d5159560d2bc6bc037d82da?height=300&amp;theme-id=light&amp;default-tab=result&amp;editable=true" style="height: 300px; width: 100%; border: 0;" loading="lazy"></iframe>

Попробуйте отправить эту форму, не вводя никаких данных. Есть ли какие-либо отличия от предыдущей демонстрации? Теперь вставьте свое имя в поле email и попробуйте отправить форму. Вы видите другое сообщение об ошибке. Как такое возможно? Сообщение отличается тем, что введенное вами значение не является действительным адресом электронной почты.

Атрибут `required` сообщает браузеру, что поле является обязательным. Браузер также проверяет, соответствуют ли введенные данные формату `type`. Поле email, показанное в примере, является действительным только в том случае, если оно не пусто и если введенные данные являются действительным адресом электронной почты.

## Помогите пользователю ввести правильный формат.

Вы узнали, как сделать поле обязательным для заполнения. Как указать браузеру, что пользователь должен ввести в поле формы не менее восьми символов?

<iframe src="https://codepen.io/web-dot-dev/embed/0901d502bbe2cc7c4aa0bd73068ddd96?height=300&amp;theme-id=light&amp;default-tab=result&amp;editable=true" style="height: 300px; width: 100%; border: 0;" loading="lazy"></iframe>

Попробуйте воспользоваться демонстрационной версией. После внесения изменений вы не должны иметь возможности отправить форму, если введено менее восьми символов.

???tip "Показать ответ"

    ```html
    <label for="password">Password (required)</label>
    <input
    	required
    	minlength="8"
    	type="password"
    	id="password"
    	name="password"
    />
    ```

    Имя атрибута - `minlength`. Установите значение `8`, и вы получите желаемое правило валидации. Если требуется обратное, используйте `maxlength`.

    !!!note ""

    	Для числовых типов ввода используйте `min` и `max`, чтобы добиться того же результата.

## Сообщите свои правила валидации

```html
<label for="password">Password (required)</label>
<input
    required
    minlength="8"
    type="password"
    id="password"
    name="password"
    aria-describedby="password-minlength"
/>
<div id="password-minlength">
    Enter at least eight characters
</div>
```

Убедитесь, что все пользователи понимают правила валидации. Для этого соедините элемент управления формой с элементом, поясняющим правила. Для этого добавьте атрибут `aria-describedby` к элементу с `id` формы.

## Атрибут шаблона

Иногда требуется определить более сложные правила валидации. И в этом случае можно воспользоваться атрибутом HTML. Он называется `pattern`, и в качестве его значения можно задать [регулярное выражение](https://regex101.com/).

```html
<label for="animal"
    >What is your favorite animal? (required)</label
>
<input
    required
    pattern="[a-z]{2,20}"
    type="text"
    id="animal"
    name="animal"
/>
```

Здесь разрешены только строчные буквы; пользователь должен ввести не менее двух символов, но не более двадцати.

Как бы вы изменили `pattern`, чтобы он допускал и прописные буквы? [Try it out](https://codepen.io/web-dot-dev/pen/bc12240b7cb5b52076621d73a8a29cf6).

???tip "Показать ответ"

    Правильный ответ - `pattern="[a-zA-Z]{2,20}"`.

## Добавить стили

Теперь вы узнали, как добавить проверку в HTML. Было бы замечательно, если бы вы могли также придавать стиль элементам управления формы в зависимости от статуса проверки. Это возможно с помощью CSS.

## Как стилизовать обязательное поле формы

Покажите пользователю, что поле является обязательным, прежде чем он начнет работать с формой.

<iframe src="https://codepen.io/web-dot-dev/embed/5a5de1e7dbdcdba86d19e30d42291a27?height=300&amp;theme-id=light&amp;default-tab=css%2Cresult&amp;editable=true" style="height: 300px; width: 100%; border: 0;" loading="lazy"></iframe>

Поля `required` можно стилизовать с помощью CSS-псевдокласса `:required`.

```css
input:required {
    border: 2px solid;
}
```

## Стиль недействительных элементов управления формы

Помните ли вы, что происходит, если данные, введенные пользователем, недействительны? Появляется сообщение об ошибке, прикрепленное к элементу управления формой. Было бы здорово адаптировать внешний вид элемента, когда это происходит?

<iframe src="https://codepen.io/web-dot-dev/embed/d6bb0f27d1faac3ffd3b594a81fad396?height=300&amp;theme-id=light&amp;default-tab=css%2Cresult&amp;editable=true" style="height: 300px; width: 100%; border: 0;" loading="lazy"></iframe>

Для добавления стилей к элементам управления недействительной формы можно использовать [псевдокласс `:invalid`](../css3/pseudo-classes.md). Кроме того, существует псевдокласс `:valid`, предназначенный для стилизации элементов действительной формы.

!!!note ""

    Иногда дизайнеры выделяют состояние `invalid` красным цветом, используя псевдокласс `:invalid`. Однако для передачи информации об ошибке или успехе никогда не следует полагаться только на цвет. Для людей с красно-зеленым дальтонизмом зеленая и красная границы выглядят практически одинаково. Они не смогут понять, произошла ли ошибка или успех. Добавьте текст или значок, чтобы сделать это очевидным.

Есть и другие способы адаптации стилей на основе валидации. В модуле о [CSS](styling.md) вы узнаете больше о стилизации форм.

!!!note ""

    На практике с `:invalid` работать сложно. Недействительные поля формы помечаются как `:invalid` еще до взаимодействия с пользователем, что может сбить его с толку. Псевдокласс `:user-invalid` решает эту проблему, поскольку стили применяются только после взаимодействия с пользователем.

    Подробнее о [`:user-invalid`](../../css/user-invalid.md).

## Валидация с помощью JavaScript {: #javascript}

Для дальнейшего улучшения проверки форм можно использовать [JavaScript Constraint Validation API](https://developer.mozilla.org/docs/Web/API/Constraint_validation).

### Предоставление содержательных сообщений об ошибках

Вы уже узнали, что сообщения об ошибках не одинаковы в каждом браузере. Как же показать всем одно и то же сообщение?

Для этого можно воспользоваться методом [`setCustomValidity()`](https://developer.mozilla.org/docs/Web/API/HTMLObjectElement/setCustomValidity) Constraint Validation API. Давайте посмотрим, как это работает.

```js
const nameInput = document.querySelector('[name="name"]');

nameInput.addEventListener('invalid', () => {
    nameInput.setCustomValidity('Please enter your name.');
});
```

Запросите элемент, для которого необходимо задать пользовательское сообщение об ошибке. Прослушайте событие `invalid` определенного вами элемента. В нем вы устанавливаете сообщение с помощью `setCustomValidity()`. В данном примере при недействительном вводе отображается сообщение `Please enter your name.`.

<iframe src="https://codepen.io/web-dot-dev/embed/7ea31257d7cd8fc28792c7f5cdaba97b?height=300&amp;theme-id=light&amp;default-tab=result&amp;editable=true" style="height: 300px; width: 100%; border: 0;" loading="lazy"></iframe>

[Откройте демо-версию](https://codepen.io/web-dot-dev/pen/7ea31257d7cd8fc28792c7f5cdaba97b) в разных браузерах, везде должно появиться одно и то же сообщение. Теперь попробуйте удалить JavaScript и повторить попытку. Вы снова увидите стандартные сообщения об ошибках.

С помощью API Constraint Validation можно сделать гораздо больше. Подробное рассмотрение использования [валидации с помощью JavaScript](javascript.md#validation-with-javascript) вы найдете в одном из следующих модулей.

Как выполнять проверку в реальном времени Вы можете добавить проверку в реальном времени в JavaScript, прослушивая событие `onblur` элемента управления формой, и проверять вводимые данные сразу же, когда пользователь покидает поле формы.

<iframe src="https://codepen.io/web-dot-dev/embed/b7ed22a0539f9beef4dc03380f51f224?height=300&amp;theme-id=light&amp;default-tab=js%2Cresult&amp;editable=true" style="height: 300px; width: 100%; border: 0;" loading="lazy"></iframe>

Щелкните по полю формы в [demo](https://codepen.io/web-dot-dev/pen/b7ed22a0539f9beef4dc03380f51f224), введите "web" и щелкните в другом месте страницы. Под полем формы появится сообщение об ошибке `minlength`.

Подробнее о реализации [проверки в реальном времени с помощью JavaScript](javascript.md#ensure-users-are-notified-about-errors-in-real-time) читайте в одном из следующих модулей.

## Ресурсы

-   [Отключить кнопку оплаты после отправки формы](https://web.dev/codelab-payment-form-best-practices/#step-4:-disable-the-payment-button-once-the-form-is-submitted)
-   [Добавьте CSS, чтобы форма работала лучше](https://web.dev/codelab-sign-up-form-best-practices/#step-2:-add-css-to-make-the-form-work-better)

:material-information-outline: Источник &mdash; [Help users enter the right data in forms](https://web.dev/learn/forms/validation/)
